@model IEnumerable<PenTester.Models.ApproveManageesModel>
@using PenTester.Models
@{
    ViewBag.Title = "Manage Users";
}

<h2>@ViewBag.Title</h2>

<ul>
    @foreach (ApproveManageesModel m in Model)
    {
        <li>
            @m.UserName
            @Html.CheckBox("cb" + m.UserId.ToString(), m.Approved, new { @onclick = "UpdateApproved(" + m.UserId + ")" })
        </li>
    }
</ul>

<script type="text/javascript" >
    function UpdateApproved(id) {
        var checkValue = $("#cb" +id).checked;
        $.ajax({
            url: "http://" + location.host + "/Account/Approve",
            type: 'post',
            contentType: 'application/json',
            dataType: 'json',
            data: { UserId: id, Approved: checkValue },
            async: true,
        });
    }
</script>