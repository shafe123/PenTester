@model PenTester.UserProfile
<h3>Manage Groups</h3>
@Html.ActionLink("Create Group", "CreateGroup")

@if (Model.GroupsIn.Except(Model.GroupsOwned).Count() > 0)
{
    <h5>Groups You Are In:</h5>
    <table>
        <thead>
            <tr>
                <td>Group Name</td>
                <td>Leave Group</td>
            </tr>
        </thead>
        @foreach (PenTester.Group group in Model.GroupsIn.Except(Model.GroupsOwned))
        {
            <tr id="@("in" + group.GroupId)">
                <td>@group.Name</td>
                <td>@Ajax.ActionLink("Remove", "RemoveMembership", new { id = group.GroupId }, new AjaxOptions() { HttpMethod = "Post", Confirm = "Are you sure you would like to remove your membership from this group?", OnComplete="Remove("+group.GroupId+")" }) </td>
            </tr>
        }
    </table>
}

@if (Model.GroupsOwned.Count > 0)
{
    <h5>Groups You Own:</h5>
    <table>
        <thead>
            <tr>
                <td>Group Name</td>
                <td>Invitation Link</td>
            </tr>
        </thead>
        @foreach (PenTester.Group group in Model.GroupsOwned)
        {
            <tr id="@("owner" + group.GroupId)">
                <td>@group.Name</td>
                <td>@Html.ActionLink(group.JoinLink, "JoinGroup", new { token = group.JoinLink })</td>
            </tr>
        }
    </table>
}

<script type="text/javascript">
    function Remove(id) {
        $("#" + id).remove();
    }
</script>